// Array untuk menyimpan data chart
let labels = [];
let amount = [];
let colors = [];

// Mengambil data dari tabel
$("table > tbody > tr").each(function() {
    // Mengambil judul dari kolom kedua
    labels.push($(this).children("td:nth-child(2)").text().trim());
    
    // Mengambil jumlah dari atribut data-amount pada kolom ketiga
    amount.push($(this).children("td:nth-child(3)").attr("data-amount"));
});

// Membuat warna random untuk setiap label
labels.forEach(() => {
    let randomColor = '#' + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0');
    colors.push(randomColor);
});

// Konfigurasi data chart
const data = {
    labels: labels,
    datasets: [{
        label: "Amount: ",
        data: amount,
        backgroundColor: colors
    }]
};

// Konfigurasi chart
const config = {
    type: "bar",
    data: data,
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        },
        plugins: {
            title: {
                display: true,
                text: "Pengeluaran"
            },
            legend: {
                display: false
            }
        }
    }
};

// Inisialisasi chart
const barChart = new Chart(
    document.getElementById("bar-index"),
    config
);